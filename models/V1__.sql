CREATE TABLE business
(
    id       BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    name     VARCHAR(255),
    type     VARCHAR(255),
    owner_id BIGINT,
    CONSTRAINT "pk_busıness" PRIMARY KEY (id)
);

CREATE TABLE business_rating
(
    id          BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    user_id     BIGINT,
    business_id BIGINT,
    comment     VARCHAR(255),
    CONSTRAINT "pk_busınessratıng" PRIMARY KEY (id)
);

CREATE TABLE employee
(
    id          BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    full_name   VARCHAR(255),
    business_id BIGINT,
    CONSTRAINT pk_employee PRIMARY KEY (id)
);

CREATE TABLE employee_rating
(
    id          BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    user_id     BIGINT,
    employee_id BIGINT,
    comment     VARCHAR(255),
    CONSTRAINT "pk_employeeratıng" PRIMARY KEY (id)
);

CREATE TABLE product
(
    id          BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    name        VARCHAR(255),
    business_id BIGINT,
    CONSTRAINT pk_product PRIMARY KEY (id)
);

CREATE TABLE product_rating
(
    id         BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    user_id    BIGINT,
    product_id BIGINT,
    comment    VARCHAR(255),
    CONSTRAINT "pk_productratıng" PRIMARY KEY (id)
);

CREATE TABLE rating_type
(
    id    BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    name  VARCHAR(255),
    value INTEGER                                 NOT NULL,
    CONSTRAINT "pk_ratıngtype" PRIMARY KEY (id)
);

CREATE TABLE rating_type_mapping
(
    id                 BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    rating_type_id     BIGINT,
    business_rating_id BIGINT,
    product_rating_id  BIGINT,
    employee_rating_id BIGINT,
    CONSTRAINT "pk_ratıngtypemappıng" PRIMARY KEY (id)
);

CREATE TABLE "user"
(
    id    BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    email VARCHAR(255),
    CONSTRAINT pk_user PRIMARY KEY (id)
);

ALTER TABLE business_rating
    ADD CONSTRAINT FK_BUSINESSRATING_ON_BUSINESS FOREIGN KEY (business_id) REFERENCES business (id);

ALTER TABLE business_rating
    ADD CONSTRAINT FK_BUSINESSRATING_ON_USER FOREIGN KEY (user_id) REFERENCES "user" (id);

ALTER TABLE business
    ADD CONSTRAINT FK_BUSINESS_ON_OWNER FOREIGN KEY (owner_id) REFERENCES "user" (id);

ALTER TABLE employee_rating
    ADD CONSTRAINT FK_EMPLOYEERATING_ON_EMPLOYEE FOREIGN KEY (employee_id) REFERENCES employee (id);

ALTER TABLE employee_rating
    ADD CONSTRAINT FK_EMPLOYEERATING_ON_USER FOREIGN KEY (user_id) REFERENCES "user" (id);

ALTER TABLE employee
    ADD CONSTRAINT FK_EMPLOYEE_ON_BUSINESS FOREIGN KEY (business_id) REFERENCES business (id);

ALTER TABLE product_rating
    ADD CONSTRAINT FK_PRODUCTRATING_ON_PRODUCT FOREIGN KEY (product_id) REFERENCES product (id);

ALTER TABLE product_rating
    ADD CONSTRAINT FK_PRODUCTRATING_ON_USER FOREIGN KEY (user_id) REFERENCES "user" (id);

ALTER TABLE product
    ADD CONSTRAINT FK_PRODUCT_ON_BUSINESS FOREIGN KEY (business_id) REFERENCES business (id);

ALTER TABLE rating_type_mapping
    ADD CONSTRAINT FK_RATINGTYPEMAPPING_ON_BUSINESSRATING FOREIGN KEY (business_rating_id) REFERENCES business_rating (id);

ALTER TABLE rating_type_mapping
    ADD CONSTRAINT FK_RATINGTYPEMAPPING_ON_EMPLOYEERATING FOREIGN KEY (employee_rating_id) REFERENCES employee_rating (id);

ALTER TABLE rating_type_mapping
    ADD CONSTRAINT FK_RATINGTYPEMAPPING_ON_PRODUCTRATING FOREIGN KEY (product_rating_id) REFERENCES product_rating (id);

ALTER TABLE rating_type_mapping
    ADD CONSTRAINT FK_RATINGTYPEMAPPING_ON_RATINGTYPE FOREIGN KEY (rating_type_id) REFERENCES rating_type (id);